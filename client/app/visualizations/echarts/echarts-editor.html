<div>
    <ul class="tab-nav">
      <li ng-class="{active: currentTab == 'general'}">
        <a ng-click="changeTab('general')">基础设置</a>
      </li>
    </ul>
    <div ng-if="currentTab == 'general'" class="m-t-10 m-b-10">
      <div class="form-group">
        <label class="control-label">{{'CHART_EDITOR.CHART_TYPE' | translate}}</label>
        <div ng-if="chartTypes">
          <!--the if is a weird workaround-->
          <ui-select ng-model="selectedChartType" ng-change="chartTypeChanged(selectedChartType)">
            <ui-select-match placeholder="选择图表种类">
              <div>
                <i class="fa fa-{{$select.selected.value.icon}}"></i>
                {{$select.selected.value.name}}
              </div>
            </ui-select-match>
            <ui-select-choices repeat="info.chartType as (chartType, info) in chartTypes">
              <div>
                <i class="fa fa-{{info.value.icon}}"></i>
                <span> </span>
                <span ng-bind-html="info.value.name | highlight: $select.search"></span>
              </div>
            </ui-select-choices>
          </ui-select>
        </div>
      </div>
      <div class="form-group">
          <label class="control-label">图表主标题</label>
          <input
            name="name"
            type="text"
            class="form-control"
            ng-model="chartTitle"
            placeholder=""
          />
        </div>
      <div class="form-group">
        <label class="control-label">图表副标题</label>
        <input
          name="name"
          type="text"
          class="form-control"
          ng-model="chartSubTitle"
          placeholder=""
        />
      </div>
    </div>
  
    <div ng-if="currentTab == 'xAxis'" class="m-t-10 m-b-10">
      <div class="form-group">
        <label class="control-label">{{'CHART_EDITOR.SCALE' | translate}}</label>
        <ui-select ng-model="options.xAxis.type">
          <ui-select-match placeholder="Choose Scale...">{{$select.selected.label}}</ui-select-match>
          <ui-select-choices repeat="scaleType.value as scaleType in xAxisScales">
            <div ng-bind-html="scaleType.label | highlight: $select.search"></div>
          </ui-select-choices>
        </ui-select>
      </div>
  
      <div class="form-group">
        <label class="control-label">{{'CHART_EDITOR.NAME' | translate}}</label>
        <input ng-model="options.xAxis.title.text" type="text" class="form-control">
      </div>
  
      <div class="checkbox">
        <label>
          <input type="checkbox" ng-model="options.sortX">
          <i class="input-helper"></i> {{'CHART_EDITOR.SORT_VALUES' | translate}}
        </label>
      </div>
  
      <div class="checkbox">
        <label>
          <input type="checkbox" ng-model="options.reverseX">
          <i class="input-helper"></i> {{'CHART_EDITOR.REVERSE_ORDER' | translate}}
        </label>
      </div>
  
      <div class="checkbox">
        <label>
          <input type="checkbox" ng-model="options.xAxis.labels.enabled">
          <i class="input-helper"></i> {{'CHART_EDITOR.SHOW_LABELS' | translate}}
        </label>
      </div>
    </div>
  
    <div ng-if="currentTab == 'yAxis'" class="m-t-10 m-b-10">
      <div ng-repeat="yAxis in options.yAxis">
        <h4>{{$index == 0 ? 'Left' : 'Right'}} {{'CHART_EDITOR.Y_AXIS' | translate}}</h4>
  
        <div class="form-group">
          <label class="control-label">{{'CHART_EDITOR.SCALE' | translate}}</label>
          <ui-select ng-model="yAxis.type">
            <ui-select-match placeholder="Choose Scale...">{{$select.selected | capitalize}}</ui-select-match>
            <ui-select-choices repeat="scaleType in yAxisScales">
              <div ng-bind-html="scaleType | capitalize | highlight: $select.search"></div>
            </ui-select-choices>
          </ui-select>
        </div>
        <div class="form-group">
          <label class="control-label">{{'CHART_EDITOR.NAME' | translate}}</label>
          <input ng-model="yAxis.title.text" type="text" class="form-control">
        </div>
        <div class="form-group">
          <label class="control-label">{{'CHART_EDITOR.MIN_VALUE' | translate}}</label>
          <input ng-model="yAxis.rangeMin" type="number" step="any" placeholder="Auto" class="form-control">
        </div>
        <div class="form-group">
          <label class="control-label">{{'CHART_EDITOR.MAX_VALUE' | translate}}</label>
          <input ng-model="yAxis.rangeMax" type="number" step="any" placeholder="Auto" class="form-control">
        </div>
  
        <div class="checkbox" ng-if="options.globalSeriesType == 'heatmap'">
          <label>
            <input type="checkbox" ng-model="options.sortY">
            <i class="input-helper"></i> {{'CHART_EDITOR.SORT_VALUES' | translate}}
          </label>
        </div>
  
        <div class="checkbox">
          <label>
            <input type="checkbox" ng-model="options.reverseY">
            <i class="input-helper"></i> {{'CHART_EDITOR.REVERSE_ORDER' | translate}}
          </label>
        </div>
  
      </div>
    </div>
  
    <div ng-if="currentTab == 'series'" class="m-t-10 m-b-10">
      <table class="table table-condensed col-table">
        <thead>
          <th style="width: 1%;">zIndex</th>
          <th ng-if="options.globalSeriesType != 'pie'">{{'CHART_EDITOR.LEFT_Y_AXIS' | translate}}</th>
          <th ng-if="options.globalSeriesType != 'pie'">{{'CHART_EDITOR.RIGHT_Y_AXIS' | translate}}</th>
          <th>{{'CHART_EDITOR.LABEL' | translate}}</th>
          <th ng-if="options.globalSeriesType != 'pie'">{{'CHART_EDITOR.TYPE' | translate}}</th>
        </thead>
        <tbody ui-sortable ng-model="form.seriesList">
          <tr ng-repeat="name in form.seriesList">
            <td style="width: 1%; cursor: move;">
              <i class="fa fa-arrows-v"></i>
              <span ng-bind="options.seriesOptions[name].zIndex + 1"></span>
            </td>
            <td ng-if="options.globalSeriesType != 'pie'">
              <input type="radio" ng-value="0" ng-model="options.seriesOptions[name].yAxis">
            </td>
            <td ng-if="options.globalSeriesType != 'pie'">
              <input type="radio" ng-value="1" ng-model="options.seriesOptions[name].yAxis">
            </td>
            <td style="padding: 3px; width: 140px;">
              <input placeholder="{{name}}" class="form-control input-sm super-small-input" type="text" ng-model="options.seriesOptions[name].name">
            </td>
            <td ng-if="options.globalSeriesType != 'pie'" style="padding: 3px; width: 105px;">
              <ui-select ng-model="options.seriesOptions[name].type">
                <ui-select-match placeholder="Chart Type">
                  <div>
                    <i class="fa fa-{{$select.selected.value.icon}}"></i>
                    {{$select.selected.value.name}}
                  </div>
                </ui-select-match>
                <ui-select-choices repeat="info.chartType as (chartType, info) in chartTypes">
                  <div>
                    <i class="fa fa-{{info.value.icon}}"></i>
                    <span> </span>
                    <span ng-bind-html="info.value.name | highlight: $select.search"></span>
                  </div>
                </ui-select-choices>
              </ui-select>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  
    <div ng-if="(currentTab == 'colors') && (['pie', 'heatmap'].indexOf(options.globalSeriesType) == -1)" class="m-t-10 m-b-10">
      <table class="table table-condensed col-table">
        <tbody>
        <tr ng-repeat="name in form.seriesList">
          <td style="padding: 3px; width: 140px;">
            <div>{{ name }}</div>
          </td>
          <td style="padding: 3px; width: 35px;">
            <ui-select ng-model="options.seriesOptions[name].color">
              <ui-select-match>
                <color-box color="$select.selected.value"></color-box>
              </ui-select-match>
              <ui-select-choices repeat="color.value as (key, color) in colors">
                <color-box color="color.value"></color-box>
                <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>
              </ui-select-choices>
            </ui-select>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  
    <div ng-if="(currentTab == 'colors') && (options.globalSeriesType == 'heatmap')" class="m-t-10 m-b-10">
      <div class="form-group" ng-if="options.globalSeriesType == 'heatmap'">
        <label class="control-label">{{'CHART_EDITOR.COLOR_SCHEME' | translate}}</label>
  
        <ui-select ng-model="options.colorScheme">
          <ui-select-match allow-clear="true" placeholder="Choose Color Scheme...">{{$select.selected | capitalize}}</ui-select-match>
          <ui-select-choices repeat="value in colorScheme">
            <div ng-bind-html="value | highlight: $select.search"></div>
          </ui-select-choices>
        </ui-select>
      </div>
  
      <div class="row">
        <div class="col-xs-6">
          <div class="form-group" ng-if="options.colorScheme == 'Custom...'">
            <label class="control-label">{{'CHART_EDITOR.MIN_COLOR' | translate}}</label>
            <ui-select ng-model="options.heatMinColor">
              <ui-select-match>
                <color-box color="$select.selected.value"></color-box>
              </ui-select-match>
              <ui-select-choices repeat="color.value as (key, color) in colors">
                <color-box color="color.value"></color-box>
                <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>
              </ui-select-choices>
            </ui-select>
          </div>
        </div>
        <div class="col-xs-6">
          <div class="form-group" ng-if="options.colorScheme == 'Custom...'">
            <label class="control-label">{{'CHART_EDITOR.MAX_COLOR' | translate}}</label>
            <ui-select ng-model="options.heatMaxColor">
              <ui-select-match>
                <color-box color="$select.selected.value"></color-box>
              </ui-select-match>
              <ui-select-choices repeat="color.value as (key, color) in colors">
                <color-box color="color.value"></color-box>
                <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>
              </ui-select-choices>
            </ui-select>
          </div>
        </div>
      </div>
    </div>
  
    <div ng-if="(currentTab == 'colors') && (options.globalSeriesType == 'pie')" class="m-t-10 m-b-10">
      <table class="table table-condensed col-table">
        <tbody>
        <tr ng-repeat="name in form.valuesList">
          <td style="padding: 3px; width: 140px;">
            <div>{{ name }}</div>
          </td>
          <td style="padding: 3px; width: 35px;">
            <ui-select ng-model="options.valuesOptions[name].color">
              <ui-select-match>
                <color-box color="$select.selected.value"></color-box>
              </ui-select-match>
              <ui-select-choices repeat="color.value as (key, color) in colors">
                <color-box color="color.value"></color-box>
                <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>
              </ui-select-choices>
            </ui-select>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  
    <div ng-if="currentTab == 'dataLabels'" class="m-t-10 m-b-10">
      <div ng-if="['line', 'area', 'column', 'scatter', 'pie', 'heatmap'].indexOf(options.globalSeriesType) >= 0" class="checkbox">
        <label>
          <input type="checkbox" ng-model="options.showDataLabels"> {{'CHART_EDITOR.SHOW_DATA_LABELS' | translate}}</label>
      </div>
  
      <div class="form-group">
        <label for="chart-editor-number-format">
          {{'CHART_EDITOR.NUMBER_V_F' | translate}}
          <span class="m-l-5" uib-popover-html="'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>'"
            popover-trigger="'click outsideClick'">
            <i class="fa fa-question-circle"></i>
          </span>
        </label>
        <input class="form-control" ng-model="options.numberFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-number-format">
      </div>
  
      <div class="form-group">
        <label for="chart-editor-percent-format">
          {{'CHART_EDITOR.PERCENT_V_F' | translate}}
          <span class="m-l-5" uib-popover-html="'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>'"
            popover-trigger="'click outsideClick'">
            <i class="fa fa-question-circle"></i>
          </span>
        </label>
        <input class="form-control" ng-model="options.percentFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-percent-format">
      </div>
  
      <div class="form-group">
        <label for="chart-editor-datetime-format">
          {{'CHART_EDITOR.DATA_TIME_V_F' | translate}}
          <span class="m-l-5" uib-popover-html="'Format <a href=&quot;https://momentjs.com/docs/#/displaying/format/&quot; target=&quot;_blank&quot;>specs.</a>'"
            popover-trigger="'click outsideClick'">
            <i class="fa fa-question-circle"></i>
          </span>
        </label>
        <input class="form-control" ng-model="options.dateTimeFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-datetime-format">
      </div>
  
      <div class="form-group">
        <label for="chart-editor-text">
          {{'CHART_EDITOR.DATA_LABELS' | translate}}
          <i class="fa fa-question-circle m-l-5" uib-popover-html="templateHint" popover-trigger="'click outsideClick'" popover-placement="top-left"></i>
        </label>
        <input class="form-control" ng-model="options.textFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-text"
          placeholder="(auto)">
      </div>
    </div>
  </div>
  